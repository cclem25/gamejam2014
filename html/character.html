<!doctype html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Test du moteur de jeu</title>
	<script src="../js/character.js"></script>
	<script type="text/javascript">

	var currentAnimation = null;
	var context = null;

	init = function() {
		canvas = document.getElementById("cvs");
		context = canvas.getContext("2d");		
		currentAnimation = new character("../images/SpriteSheet-Monkey3.png", "SE", 0, callbackWhenReady);
	}

	/*callbackWhenReady = function() {
		currentAnimation.draw(context, 10, 10);
	}
	*/
	callbackWhenReady = function() {
		animables[0] = currentAnimation; 
		currentAnimation.play();
		currentAnimation.draw(context, 10, 10, 1);
		mainloop();
	}

	var fps = 2;
	// Main loop
	mainloop = function() {
		
		context.clearRect(0, 0, canvas.width, canvas.height);
		for (var i=0; i < animables.length; i++) {
			animables[i].draw(context, 10, 10, 1);
			//animables[i].setXY(100+i, 40);
		}
		setTimeout("requestAnimationFrame(mainloop)", 1000/fps);
	}
	var animables = [];
	</script>
</head>

<body onload="init()">

	<div style="width: 1004px; margin: 20px auto;">
		<canvas id="cvs" width="1000" height="560" style="border: solid 2px #000;">
		Votre navigateur ne supporte pas les canvas... Dommage.
		</canvas>
	</div>

</body>

</html>